# Data Table PB - gen pbentity

> This feature has been available since version `v2.4`.

## Basic Introduction

This command is used to read the configured database and generate corresponding `proto` data structure files based on the data tables.

## Command Usage

```bash
$ gf gen pbentity -h
USAGE
    gf gen pbentity [OPTION]

OPTION
    -p, --path                 directory path for generated files storing
    -k, --package              package path for all entity proto files
    -l, --link                 database configuration, the same as the ORM configuration of GoFrame
    -t, --tables               generate models only for given tables, multiple table names separated with ','
    -f, --prefix               add specified prefix for all entity names and entity proto files
    -r, --removePrefix         remove specified prefix of the table, multiple prefix separated with ','
    -rf, --removeFieldPrefix   remove specified prefix of the field, multiple prefix separated with ','
    -n, --nameCase             case for message attribute names, default is "Camel":
                               | Case            | Example            |
                               |---------------- |--------------------|
                               | Camel           | AnyKindOfString    |
                               | CamelLower      | anyKindOfString    | default
                               | Snake           | any_kind_of_string |
                               | SnakeScreaming  | ANY_KIND_OF_STRING |
                               | SnakeFirstUpper | rgb_code_md5       |
                               | Kebab           | any-kind-of-string |
                               | KebabScreaming  | ANY-KIND-OF-STRING |
    -j, --jsonCase             case for message json tag, cases are the same as "nameCase", default "CamelLower".
                               set it to "none" to ignore json tag generating.
    -o, --option               extra protobuf options
    -h, --help                 more information about this command
```

### Examples

```bash
gf gen pbentity
gf gen pbentity -l "mysql:root:12345678@tcp(127.0.0.1:3306)/test"
gf gen pbentity -p ./protocol/demos/entity -t user,user_detail,user_login
gf gen pbentity -r user_ -k github.com/gogf/gf/example/protobuf
gf gen pbentity -r user_
```

> If you are using the project engineering scaffold recommended by the framework and have the `make` tool installed on your system, you can also use the `make pbentity` shortcut command.

### Parameter Description

- **gfcli.gen.pbentity**: Code generation configuration item, can have multiple configuration items forming an array, supporting multiple database generations. Different databases can set different generation rules, for example, generating to different locations or files.
- **path**: Optional, default is `manifest/protobuf/pbentity`. The directory path where the generated `proto` files are stored.
- **package**: Automatically recognized from `go.mod`, the `go_package` path in the generated `proto` files, and automatically recognizes the `package` name.
- **link**: Consists of two parts, the first part indicates the type of database you are connecting to, such as `mysql`, `postgresql`, etc., and the second part is the `DSN` information for connecting to the database. For details, please refer to the [ORM configuration](/docs/core-component/orm/config) section.
- **prefix**: The prefix for generating database objects and files to distinguish between different databases or the same table names in different databases, preventing table name conflicts due to coverage.
- **removePrefix**: Remove the specified prefix name of the data table. Multiple prefixes are separated by commas.
- **removeFieldPrefix**: Remove the specified prefix name of the field name. Multiple prefixes are separated by commas.
- **tables**: Specify the data tables in the current database that need to perform code generation. If left empty, it means all tables in the database will be generated.
- **nameCase**: Optional, default is `CamelLower`. The format of the generated message attribute field names. Options include `Camel`, `CamelLower`, `Snake`, `SnakeScreaming`, `SnakeFirstUpper`, `Kebab`, `KebabScreaming`. For more information, please refer to the naming convention help example.
- **option**: Additional `proto` option configuration list.

## Differences Between gen pbentity and gen dao

### Similarities

- Both `gen pbentity` and `gen dao` generate `entity` content, which means they create corresponding `Golang` `entity` objects from data collections (database tables) for easy use in programs. The generation is unidirectional, meaning entities can only be generated from data collections to ensure the synchronization of `entity` data structures.

- The entity data objects generated by `gen dao` are通用的 for the Golang language but primarily serve `HTTP` protocols. In `HTTP` services, the entities generated by `gen dao`, although located under the `internal` directory, will eventually be part of the `HTTP API` response served to clients.

### Differences

- In `GRPC` services, the `entity` data structures generated by `gen dao` cannot be used for `GRPC` interfaces because `GRPC` data structures require proto files for definition. Therefore, in `GRPC` services, you need to use the pbentity proto files generated by `gen pbentity`. Additionally, in `GRPC` microservice development, the entities generated by `gen dao` no longer serve a specific purpose.

- The name `pbentity` is chosen instead of just `entity` to prevent conflicts with the `entity` generated by `gen dao`.
